---
const latestProducts = [
  {
    id: 1,
    name: "Outdoor Security Camera",
    model: "Uho-B2D-M5F3(4)D",
    image: "/images/front pages product.png",
    category: "Wi-Fi Camera",
    link: "/products/outdoor-security-camera"
  },
];
---

<section class="py-20 bg-white products-section" data-scroll>
  <div class="container mx-auto px-6 lg:px-8 max-w-6xl">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6 title-reveal">
        The latest must-have products
      </h2>
       <div class="w-24 h-1 bg-teal-400 mx-auto line-reveal"></div>
    </div>

    <!-- Single Product Card - Centered -->
    <div class="flex justify-center">
      <div class="max-w-sm w-full">
        {latestProducts.map((product) => (
          <div class="bg-gray-100 rounded-3xl p-8 text-center shadow-sm hover:shadow-md transition-shadow duration-300 card-reveal">
            <!-- Product Image -->
            <div class="mb-8 flex justify-center image-container">
              <img 
                src={product.image} 
                alt={product.name}
                class="w-48 h-auto object-contain product-image"
              />
            </div>

            <!-- Product Info -->
            <div class="space-y-2 product-info">
              <h3 class="text-xl font-bold text-gray-800 product-name">
                {product.name}
              </h3>
              <p class="text-gray-600 text-sm product-model">
                {product.model}
              </p>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Bottom Section with Navigation Dots -->
    <div class="flex justify-center mt-12 space-x-2 dots-reveal">
      <div class="w-2 h-2 bg-gray-400 rounded-full dot-animate" style="animation-delay: 0.1s;"></div>
      <div class="w-2 h-2 bg-gray-400 rounded-full dot-animate" style="animation-delay: 0.15s;"></div>
      <div class="w-2 h-2 bg-gray-400 rounded-full dot-animate" style="animation-delay: 0.2s;"></div>
      <div class="w-2 h-2 bg-gray-400 rounded-full dot-animate" style="animation-delay: 0.25s;"></div>
    </div>
  </div>
</section>

<style>
/* Section base animation */
.products-section {
  opacity: 0;
  transform: translateY(50px);
  transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.products-section.in-view {
  opacity: 1;
  transform: translateY(0);
}

/* Title animation - faster */
.title-reveal {
  opacity: 0;
  transform: translateY(40px) scale(0.95);
  transition: all 0.9s cubic-bezier(0.23, 1, 0.32, 1);
}

.products-section.in-view .title-reveal {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition-delay: 0.1s;
}

/* Line reveal animation */
.line-reveal {
  width: 0;
  transition: width 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.products-section.in-view .line-reveal {
  width: 6rem; /* w-24 */
  transition-delay: 0.3s;
}

/* Card reveal - faster motion */
.card-reveal {
  opacity: 0;
  transform: translateY(60px) rotateX(15deg) scale(0.9);
  transition: all 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.products-section.in-view .card-reveal {
  opacity: 1;
  transform: translateY(0) rotateX(0deg) scale(1);
  transition-delay: 0.5s;
}

/* Product image animation */
.product-image {
  opacity: 0;
  transform: translateY(25px) scale(0.8);
  transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.products-section.in-view .product-image {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition-delay: 0.7s;
}

/* Product info staggered animation */
.product-name {
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.product-model {
  opacity: 0;
  transform: translateY(15px);
  transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.products-section.in-view .product-name {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 0.9s;
}

.products-section.in-view .product-model {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 1s;
}

/* Dots animation */
.dots-reveal {
  opacity: 0;
  transform: translateY(15px);
  transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.products-section.in-view .dots-reveal {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 1.1s;
}

.dot-animate {
  opacity: 0;
  transform: scale(0);
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.products-section.in-view .dot-animate {
  opacity: 1;
  transform: scale(1);
}

/* Floating animation for the card once loaded */
.products-section.in-view .card-reveal {
  animation: gentle-float 3s ease-in-out infinite;
}

@keyframes gentle-float {
  0%, 100% { transform: translateY(0) rotateX(0deg) scale(1); }
  50% { transform: translateY(-3px) rotateX(0deg) scale(1); }
}

/* Enhanced hover effects */
.card-reveal:hover {
  transform: translateY(-8px) scale(1.03);
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.12);
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.card-reveal:hover .product-image {
  transform: translateY(0) scale(1.05);
  transition: all 0.3s ease-out;
}

/* Pulse effect for dots */
.products-section.in-view .dot-animate {
  animation: pulse-dot 1.5s ease-in-out infinite;
}

@keyframes pulse-dot {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.15); }
}

/* Mobile responsiveness */
@media (max-width: 768px) {
  .title-reveal {
    transform: translateY(30px) scale(0.95);
  }
  
  .card-reveal {
    transform: translateY(40px) scale(0.95);
  }
}
</style>

<script>
// Enhanced intersection observer for products section
const productsObserverOptions = {
  threshold: [0, 0.2, 0.5],
  rootMargin: '0px 0px -100px 0px'
};

const productsObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    const section = entry.target;
    
    if (entry.isIntersecting && entry.intersectionRatio > 0.2) {
      // Add smooth class addition with faster timing
      setTimeout(() => {
        section.classList.add('in-view');
      }, 100);
      
      // Stop observing once animated
      productsObserver.unobserve(section);
    }
  });
}, productsObserverOptions);

// Initialize products section animation
document.addEventListener('DOMContentLoaded', () => {
  const productsSection = document.querySelector('.products-section');
  if (productsSection) {
    productsObserver.observe(productsSection);
  }
  
  // Add performance optimization
  const style = document.createElement('style');
  style.textContent = `
    .products-section * {
      will-change: transform, opacity;
    }
  `;
  document.head.appendChild(style);
  
  // Remove will-change after animations complete
  setTimeout(() => {
    if (document.head.contains(style)) {
      document.head.removeChild(style);
    }
  }, 2000);
});
</script>